function e(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=t.parcelRequire7d3f;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){i[e]=t},t.parcelRequire7d3f=o),o.register("27Lyk",(function(t,r){var i,o;e(t.exports,"register",(()=>i),(e=>i=e)),e(t.exports,"resolve",(()=>o),(e=>o=e));var s={};i=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)s[t[r]]=e[t[r]]},o=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("27Lyk").register(JSON.parse('{"bHNlO":"index.1e531a63.js","6uka6":"ferrari.fa972be2.png"}'));class s{constructor(e){this.position=e}update(e){}draw(e,t){}keyboard_event(e){}}const n=e=>e*Math.PI/180;let a;!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(a||(a={}));let h={ArrowUp:a.UP,ArrowDown:a.DOWN,ArrowLeft:a.LEFT,ArrowRight:a.RIGHT};a.UP,a.DOWN,a.LEFT,a.RIGHT;var l;l=new URL(o("27Lyk").resolve("6uka6"),import.meta.url).toString();class d extends s{constructor(e,t,r={w:50,h:100}){super(e),this.keyboardMap=t,this.carSize=r,this.carColor="red",this.angle=0,this.angleSpeed=0,this.carSpeed=0,this.carAcceleration=0,this.image=new Image,this.image.src=l}update(e){this.angle+=this.angleSpeed,this.angleSpeed*=.9,this.carSpeed=.9*this.carSpeed+this.carAcceleration;let t={x:this.position.x+Math.cos(n(this.angle))*this.carSpeed,y:this.position.y+Math.sin(n(this.angle))*this.carSpeed};var r;(r=t).x<1020&&r.x>0&&r.y<1024&&r.y>0&&(this.position=t)}draw(e,t){t.fillStyle=this.carColor,t.translate(this.position.x,this.position.y),t.rotate(n(this.angle)),t.rotate(n(180)),t.drawImage(this.image,-50,-25,100,50)}keyboard_event_down(e){let t=this.keyboardMap[e];t==a.LEFT?this.angleSpeed-=4:t==a.RIGHT?this.angleSpeed+=4:t==a.UP?this.carAcceleration=.5:t==a.DOWN&&(this.carAcceleration=-.5)}keyboard_event_up(e){let t=this.keyboardMap[e];(t==a.UP||t==a.DOWN)&&(this.carAcceleration=0)}}class c extends s{constructor(e,t=100,r=45,i,o){super(e),this.barrierWith=t,this.angle=r,this.car=i,this.touched=!1,this.barrierindex=o}update(){let e=this.car.position;if(void 0!==e){let t=this.position;Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<30&&u.touchingBarrier(this.barrierindex)&&(this.touched=!0)}}draw(e,t){t.translate(this.position.x,this.position.y),t.rotate(n(this.angle)),this.touched?t.strokeStyle="green":t.strokeStyle="red",t.lineWidth=1,t.beginPath(),t.moveTo(-this.barrierWith/2,0),t.lineTo(this.barrierWith/2,0),t.arc(0,0,3,0,n(360)),t.closePath(),t.stroke(),t.fill()}}class p{constructor(e){this.currentBarrier=0,this.currentLap=0,this.chrono=0;let t=[],r=500,i=500;for(let o=0;o<20;o++){let s=18*o;t.push(new c({x:r+400*Math.sin(n(s)),y:i+400*Math.cos(n(s))},80,90-s,e,o))}console.log("CIRCUIT CREATED"),this.barriers=t}update(e){this.chrono+=e}addLap(){console.log("LAP"),this.currentLap++,this.currentBarrier=0,this.barriers.forEach((e=>e.touched=!1)),this.currentLap>=1&&alert(`YOU WON! Your score ${this.getChrono()}`)}getChrono(){return`${this.chrono.toFixed(1)} segundos`}draw(){}touchingBarrier(e){return this.currentBarrier==e&&(this.currentBarrier++,this.currentBarrier==this.barriers.length&&this.addLap(),!0)}}let u;class y extends s{update(){}keyboard_event(){}draw(e,t){const r=u.chrono.toFixed(1);t.font="15px Arial",t.fillStyle="black",t.fillText(`CHRONO:${r} segundos`,this.position.x,this.position.y)}}class f extends s{update(){}keyboard_event(){}draw(e,t){const r=(1/e).toFixed(2);t.font="15px Arial",t.fillStyle="black",t.fillText(`FPS:${r}`,this.position.x,this.position.y)}}class g extends s{update(){}keyboard_event(){}draw(e,t){const r=u.currentLap;t.font="15px Arial",t.fillStyle="black",t.fillText(`LAP:${r}/1`,this.position.x,this.position.y)}}window.onload=()=>{console.log("brum brum!");var e=document.getElementById("canvas"),t=e.getContext("2d");let r=new f({x:5,y:15}),i=new g({x:100,y:15}),o=new y({x:200,y:15}),s=new d({x:400,y:900},h),n=[s];u=new p(s);let a=[r,i,o,u,...n,...u.barriers],l=0;const c=r=>{let i=(r-l)/1e3;l=r,a.forEach((e=>e.update(i))),t.clearRect(0,0,e.width,e.height),a.forEach((e=>{t.save(),e.draw(i,t),t.restore()})),window.requestAnimationFrame(c)};window.requestAnimationFrame(c),document.body.addEventListener("keydown",(e=>{a.forEach((t=>{t.keyboard_event_down&&t.keyboard_event_down(e.key)}))})),document.body.addEventListener("keyup",(e=>{a.forEach((t=>{t.keyboard_event_up&&t.keyboard_event_up(e.key)}))}))};
//# sourceMappingURL=index.1e531a63.js.map
